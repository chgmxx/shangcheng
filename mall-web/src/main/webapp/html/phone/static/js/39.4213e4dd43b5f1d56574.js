webpackJsonp([39],{ATQG:function(t,e,o){e=t.exports=o("BkJT")(!1),e.push([t.i,".ik-box[data-v-d029ace2]{display:-webkit-box;display:-moz-box;display:-o-box;display:box}.box-sizing[data-v-d029ace2]{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.text-overflow[data-v-d029ace2]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.img-upload[data-v-d029ace2]{position:relative;width:100%;height:100%;background-size:cover;background-position:50%;color:#999;border:2px dashed #999;border-radius:5px;text-align:center;display:-webkit-box;display:-moz-box;display:-o-box;display:box;-webkit-box-align:center;-o-box-align:center;box-align:center;-webkit-box-pack:center;-o-box-pack:center;box-pack:center;-webkit-box-orient:vertical;-o-box-orient:vertical;box-orient:vertical}.img-upload i[data-v-d029ace2]{font-size:.58666667rem}.img-upload p[data-v-d029ace2]{width:75%}input[data-v-d029ace2]{position:absolute;width:100%;height:100%;display:block;top:0;left:0;opacity:0}.update-div[data-v-d029ace2]{position:relative}",""])},DPYN:function(t,e,o){"use strict";function a(t){o("L2Wz")}Object.defineProperty(e,"__esModule",{value:!0});var i=o("zIfa"),n=o("l/cW"),r=o("0HdQ"),s=a,c=r(i.a,n.a,!1,s,"data-v-5a9f207e",null);e.default=c.exports},F0mo:function(t,e,o){e=t.exports=o("BkJT")(!1),e.push([t.i,".ik-box[data-v-5a9f207e]{display:-webkit-box;display:-moz-box;display:-o-box;display:box}.box-sizing[data-v-5a9f207e]{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.text-overflow[data-v-5a9f207e]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.comment-main[data-v-5a9f207e]{width:100%;padding-bottom:.89333333rem}.comment-main .comment-goods[data-v-5a9f207e]{background:#fff;padding:.13333333rem .26666667rem;margin-bottom:.13333333rem}.comment-main .comment-goods .goods-img[data-v-5a9f207e]{float:left;width:1.76rem;height:1.76rem;background-size:cover;background-position:50%}.comment-main .comment-goods .goods-txt[data-v-5a9f207e]{width:72%;float:right}.comment-main .comment-goods .goods-txt>p[data-v-5a9f207e]:last-child{margin-top:.32rem}.comment-main .comment-content[data-v-5a9f207e]{font-size:0;background:#fff;padding:.26666667rem 0 0;width:100%}.comment-main .comment-content .comment-textarea[data-v-5a9f207e]{width:92%;margin:0 auto;display:block;height:4.13333333rem;border:1px solid #ededed;background:0;padding:.06666667rem}.comment-main .comment-content .comment-photo[data-v-5a9f207e]{width:100%;text-align:justify;padding:.26666667rem}.comment-main .comment-content .comment-photo .comment-img[data-v-5a9f207e],.comment-main .comment-content .comment-photo .comment-upload[data-v-5a9f207e]{float:left;position:relative;width:22%;height:1.53333333rem;background-size:cover;background-position:50%;margin-top:.26666667rem;margin-right:.2rem}.comment-main .comment-content .comment-photo .comment-img input[data-v-5a9f207e],.comment-main .comment-content .comment-photo .comment-upload input[data-v-5a9f207e]{position:absolute;width:100%;height:100%;display:block;top:0;left:0;opacity:0}.comment-main .comment-content .comment-photo .comment-img[data-v-5a9f207e]{position:relative}.comment-main .comment-content .comment-photo .comment-img img[data-v-5a9f207e]{width:100%;height:100%}.comment-main .comment-content .comment-photo .comment-img i[data-v-5a9f207e]{width:.4rem;height:.4rem;text-align:center;line-height:.4rem;background:rgba(0,0,0,.6);color:#e0e0e8;font-size:.24rem;border-radius:100%;position:absolute;top:-8%;right:-8%}.comment-main .comment-content .comment-photo .border-img[data-v-5a9f207e]{border:1px solid #ededed;width:26%;height:1.86666667rem}.comment-main .comment-content .comment-txt[data-v-5a9f207e]{width:100%;padding:0 .26666667rem}.comment-main .comment-main-footer[data-v-5a9f207e]{width:100%;padding:0 .3rem;background:#fff;font-size:0}.comment-main .comment-main-footer .comment-button[data-v-5a9f207e]{text-align:center;width:33%;display:inline-block;padding:.32rem 0;color:#888}.comment-main .comment-main-footer .comment-button i[data-v-5a9f207e]{font-size:.45333333rem}.comment-main .comment-main-footer .comment-button>i[data-v-5a9f207e]:first-child{display:inline-block}.comment-main .comment-main-footer .comment-button>i[data-v-5a9f207e]:last-child{display:none}.comment-main .comment-main-footer .selected[data-v-5a9f207e]{color:#e4393c}.comment-main .comment-main-footer .selected>i[data-v-5a9f207e]:first-child{display:none}.comment-main .comment-main-footer .selected>i[data-v-5a9f207e]:last-child{display:inline-block}.comment-footer1[data-v-5a9f207e]{width:100%}.comment-footer1 .shop-max-button[data-v-5a9f207e]{height:.89333333rem;border-radius:0}.icon-guanbi[data-v-5a9f207e]{z-index:2}",""])},Huuc:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"imgbox"},[o("div",{staticClass:"user-head-portrait",style:{backgroundImage:"url("+t.background+")"}}),t._v(" "),0==t.isHeadPortrait&&void 0==t.background?o("div",{staticClass:"default-img"},[o("i",{staticClass:"iconfont icon-tupianjiazaizhong-",staticStyle:{color:"#d6d6d6"}})]):t._e(),t._v(" "),1==t.isHeadPortrait&&void 0==t.background?o("div",{staticClass:"default-img"},[o("i",{staticClass:"iconfont icon-ren1"})]):t._e()])},i=[],n={render:a,staticRenderFns:i};e.a=n},Ih1W:function(t,e,o){"use strict";var a=o("BMa3"),i=o.n(a);e.a={props:["maxNums","imgURL","styles","index"],data:function(){return{imgData:[],maxNum:3,styleType:1}},mounted:function(){this.maxNums>0&&(this.maxNum=this.maxNums),this.imgData=this.imgURL,null!=this.styles&&(this.styleType=this.styles)},methods:{imageValidate:function(){if(null!=this.imgData&&this.imgData.length>=this.maxNum)return this.$parent.$parent.$refs.bubble.show_tips("图片最多上传"+this.maxNum+"张"),!1},readFile:function(t){var e=t.target.files,o=this;if(null!=this.imgData&&o.imgData.length+e.length>o.maxNum)return void o.$parent.$parent.$refs.bubble.show_tips("图片最多上传"+this.maxNum+"张");this.$parent.$parent.$refs.loading.show(!0);var a=new FormData;if(a.append("busId",o.$store.state.busId),null!=e&&e.length>0)for(var n=0;n<e.length;n++)a.append("file",e[n]);var r={headers:{"Content-Type":"multipart/form-data"}},s=window.h5App.api+h5App.activeAPI.upload_image_post;i.a.post(s,a,r).then(function(t){o.$parent.$parent.$refs.loading.show(!1);var e=t.data;if(1001==e.code)return void(location.href=e.url);if(0!=e.code)return void o.$parent.$refs.bubble.show_tips(e.msg);var a=e.data;o.imgData=a.split(",");var i=[o.imgData];null!=o.index&&(i[i.length]=o.index),o.$emit("returnUrl",i)})}}}},L2Wz:function(t,e,o){var a=o("F0mo");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("8bSs")("595c7f20",a,!0)},Z4ka:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[1==t.styleType?o("div",{staticClass:"img-upload"},[o("i",{staticClass:"iconfont icon-xiangji"}),t._v(" "),o("p",{staticClass:"fs36"},[t._v("\n              上传凭证(最多"+t._s(t.maxNum)+"张)\n      ")]),t._v(" "),o("input",{attrs:{type:"file",multiple:"true",accept:"image/*"},on:{change:function(e){t.readFile(e)},click:t.imageValidate}})]):t._e(),t._v(" "),2==t.styleType?o("div",{staticClass:"update-div iconfont icon-jiaimg"},[o("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.readFile(e)},click:t.imageValidate}})]):t._e()])},i=[],n={render:a,staticRenderFns:i};e.a=n},kr9m:function(t,e,o){"use strict";function a(t){o("ydrn")}var i=o("lGvr"),n=o("Huuc"),r=o("0HdQ"),s=a,c=r(i.a,n.a,!1,s,"data-v-6bd4cf5e",null);e.a=c.exports},"l/cW":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"shop-wrapper ",attrs:{id:"app"}},[o("div",{staticClass:"comment-main"},[null!=t.productObj?o("div",{staticClass:"comment-goods clearfix",on:{click:function(e){t.toReturnProductDetail(t.productObj.productId,t.productObj.shopId,t.productObj.busId)}}},[o("div",{staticClass:"goods-img"},[o("default-img",{attrs:{background:t.imgUrl+t.productObj.productImageUrl,isHeadPortrait:0}})],1),t._v(" "),o("div",{staticClass:"goods-txt"},[o("p",{staticClass:"fs40"},[t._v(t._s(t.productObj.productName))]),t._v(" "),o("p",{staticClass:"fs36 shopGray"},[null!=t.productObj.productSpecifica?o("em",[t._v(t._s(t.productObj.productSpecifica)+"/")]):t._e(),t._v(t._s(t.productObj.productNum)+"件\r\n                ")])])]):t._e(),t._v(" "),o("div",{staticClass:"comment-content"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"comment-textarea fs46",attrs:{placeholder:"请写下你的评价"},domProps:{value:t.content},on:{blur:t.blurValidate,input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),o("div",{staticClass:"comment-photo border clearfix"},[t._l(t.imageArr,function(e,a){return null!=t.imageArr?o("div",{staticClass:"comment-img"},[o("default-img",{attrs:{background:t.imgUrl+e,isHeadPortrait:1}}),t._v(" "),o("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.removeImages(a)}}})],1):t._e()}),t._v(" "),null!=t.imageArr&&t.imageArr.length<3?o("div",{staticClass:"comment-upload"},[o("img-upload",{attrs:{imgURL:t.imageArr},on:{returnUrl:t.returnUrl}})],1):t._e()],2),t._v(" "),o("div",{staticClass:"comment-main-footer"},[o("div",{staticClass:"comment-button fs46 ",class:{selected:1==t.feel},on:{click:function(e){t.comment_selected(1)}}},[o("i",{staticClass:"iconfont icon-daipingjia"}),t._v(" "),o("i",{staticClass:"iconfont icon-haoping "}),t._v("\r\n                    好评\r\n                ")]),t._v(" "),o("div",{staticClass:"comment-button fs46",class:{selected:0==t.feel},on:{click:function(e){t.comment_selected(0)}}},[o("i",{staticClass:"iconfont icon-zhongping"}),t._v(" "),o("i",{staticClass:"iconfont icon-zhongping1 "}),t._v("\r\n                    中评\r\n                ")]),t._v(" "),o("div",{staticClass:"comment-button fs46  ",class:{selected:-1==t.feel},on:{click:function(e){t.comment_selected(-1)}}},[o("i",{staticClass:"iconfont icon-chaping"}),t._v(" "),o("i",{staticClass:"iconfont icon-chaping1"}),t._v("\r\n                    差评\r\n                ")])])])]),t._v(" "),o("section",{staticClass:"shop-footer-fixed comment-footer1"},[o("div",{staticClass:"shop-max-button fs52 shop-bg",on:{click:t.submitComment}},[t._v("\r\n            发表评价\r\n        ")])])])},i=[],n={render:a,staticRenderFns:i};e.a=n},"l4l+":function(t,e,o){"use strict";function a(t){o("q+e0")}var i=o("Ih1W"),n=o("Z4ka"),r=o("0HdQ"),s=a,c=r(i.a,n.a,!1,s,"data-v-d029ace2",null);e.a=c.exports},lGvr:function(t,e,o){"use strict";e.a={props:["background","isHeadPortrait"],data:function(){return{}},mounted:function(){}}},pbdT:function(t,e,o){e=t.exports=o("BkJT")(!1),e.push([t.i,".ik-box[data-v-6bd4cf5e]{display:-webkit-box;display:-moz-box;display:-o-box;display:box}.box-sizing[data-v-6bd4cf5e]{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.text-overflow[data-v-6bd4cf5e]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.imgbox[data-v-6bd4cf5e]{width:101%;height:101%;position:relative}.user-head-portrait[data-v-6bd4cf5e]{width:100%;height:100%;background-size:100%;background-repeat:no-repeat;background-position:50%;position:relative;z-index:1}.default-img[data-v-6bd4cf5e]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:0;line-height:1;display:-webkit-box;display:-moz-box;display:-o-box;display:box;-webkit-box-pack:center;-o-box-pack:center;box-pack:center;-webkit-box-align:center;-o-box-align:center;box-align:center}.default-img .iconfont[data-v-6bd4cf5e]{font-size:1.33333333rem;color:#fff}",""])},"q+e0":function(t,e,o){var a=o("ATQG");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("8bSs")("9c879cf0",a,!0)},ydrn:function(t,e,o){var a=o("pbdT");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("8bSs")("c8df441a",a,!0)},zIfa:function(t,e,o){"use strict";var a=o("kr9m"),i=o("l4l+");e.a={name:"comment",data:function(){return{imageArr:[],background:null,busId:this.$route.params.busId||sessionStorage.getItem("busId"),orderDetailId:this.$route.params.orderDetailId,imgUrl:"",productObj:{},content:"",feel:1}},components:{defaultImg:a.a,imgUpload:i.a},mounted:function(){this.loadDatas(),this.commonFn.setTitle("评论"),this.$store.commit("show_footer",!1)},beforeDestroy:function(){this.$store.commit("show_footer",!0)},methods:{comment_selected:function(t){this.feel=t},removeImages:function(t){this.imageArr.splice(t,1)},returnUrl:function(t){var e=this;null!=e.imageArr&&null!=t?t.forEach(function(t,o){e.$set(e.imageArr,e.imageArr.length,t)}):null!=t&&(e.imageArr=t)},loadDatas:function(){var t=this,e={busId:t.busId,url:location.href,orderDetailId:this.orderDetailId,browerType:t.$store.state.browerType};t.ajaxRequest({url:h5App.activeAPI.to_comment_product_post,data:e,success:function(e){var o=e.data;t.imgUrl=e.imgUrl,t.productObj=o,console.log(o,"myData")}})},blurValidate:function(){var t=this.commonFn.isNull,e=this.content,o=this.$parent.$refs.bubble.show_tips;return t(e)?(o(Language.comment_content_null_msg),!1):!(e.length>240)||(o(Language.comment_content_length_msg),!1)},submitComment:function(){var t=this,e=this.productObj;if(!this.blurValidate())return!1;var o={busId:t.busId,url:location.href,browerType:t.$store.state.browerType,orderId:e.orderId,orderDetailId:this.orderDetailId,productId:e.productId,content:this.content,feel:this.feel};null!=this.imageArr&&this.imageArr.length>0&&(o.imageUrls=this.imageArr.toString()),t.ajaxRequest({url:h5App.activeAPI.save_comment_post,data:o,loading:!0,success:function(e){var o=t.busId,a=e.data;t.$router.push("/comment/success/"+o+"/"+a),t.commonFn.loading(t,!1)}})},toReturnProductDetail:function(t,e,o){var a=productObj.orderType||0,i=productObj.activityId||0;this.$router.push("/goods/details/"+e+"/"+o+"/"+a+"/"+t+"/"+i)}}}}});
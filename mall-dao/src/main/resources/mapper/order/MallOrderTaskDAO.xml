<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gt.mall.dao.order.MallOrderTaskDAO">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.gt.mall.entity.order.MallOrderTask">
        <id column="id" property="id"/>
        <result column="task_type" property="taskType"/>
        <result column="create_time" property="createTime"/>
        <result column="order_no" property="orderNo"/>
        <result column="order_id" property="orderId"/>
        <result column="order_return_id" property="orderReturnId"/>
        <result column="return_day" property="returnDay"/>
        <result column="is_delete" property="isDelete"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, task_type AS taskType, create_time AS createTime, order_no AS orderNo, order_id AS orderId, order_return_id AS orderReturnId, return_day AS returnDay, is_delete AS isDelete
    </sql>

    <select id="findByType" resultMap="BaseResultMap" parameterType="map">
        SELECT id, task_type , create_time, order_no , order_id , order_return_id, return_day, is_delete
        from t_mall_order_task t
        <where>
            <if test="type != null and type != ''">
                and t.task_type = #{type}
            </if>
            <if test="orderNo != null and orderNo != ''">
                and t.order_no = #{orderNo}
            </if>
            <if test="orderId != null and orderId != ''">
                and t.order_id = #{orderId}
            </if>
            <if test="orderReturnId != null and orderReturnId != ''">
                and t.order_return_id = #{orderReturnId}
            </if>
            and t.is_delete = 0
        </where>
        ORDER BY t.create_time desc
    </select>

</mapper>
